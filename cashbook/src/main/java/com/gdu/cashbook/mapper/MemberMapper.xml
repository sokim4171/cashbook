<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gdu.cashbook.mapper.MemberMapper">
  
  
  
  <!-- 회원 정보 수정 -->
  <update id="updateMember" parameterType="com.gdu.cashbook.vo.Member">
  	UPDATE member
  	SET member_name=#{memberName}, 
  		member_addr=#{memberAddr}, 
  		member_phone=#{memberPhone},
  		member_email=#{memberEmail}
  	WHERE member_id=#{memberId}
  		AND member_pw=PASSWORD(#{memberPw})
  </update>
  
  
  <!-- 회원탈퇴 : 삭제하는 id memberid추가+member회원정보 삭제  -->
  <!-- 회원 정보 삭제 -->
  <delete id="deleteMember" parameterType="com.gdu.cashbook.vo.Member">
  	delete from member 
  	where member_id=#{memberId}
  		AND member_pw=PASSWORD(#{memberPw})
  </delete>
  
  
  <!-- memberInfo에 사용  -->
  <select id="selectMemberOne" 
	  parameterType="com.gdu.cashbook.vo.LoginMember" 
	  resultType="com.gdu.cashbook.vo.Member">
  	SELECT 
  		member_id memberId,
    	member_pw memberPw,
    	member_name memberName,
    	member_addr memberAddr,
    	member_phone memberPhone,
    	member_email memberEmail
  	FROM member
  	WHERE member_id=#{memberId}
  </select>
  
  <!-- 중복 체크 쿼리 -->
  <select id="selectMemberId"
  		parameterType="String" resultType="String">
  	select
  		member_id
  	from (SELECT member_id FROM member UNION SELECT member_id FROM memberid) t
  	where member_id=#{memberIdCheck}
  </select>

  <!-- 로그인멤버  -->
  <select id="selectLoginMember" 
	  parameterType="com.gdu.cashbook.vo.LoginMember" 
	  resultType="com.gdu.cashbook.vo.LoginMember">
  	SELECT 
  		member_id memberId,
  		member_pw memberPw
  	FROM member
  	WHERE member_id=#{memberId}
  		AND member_pw=PASSWORD(#{memberPw})
  </select>

  <!-- 추가 (회원가입)  -->
  <insert id="insertMember" parameterType="com.gdu.cashbook.vo.Member">
    insert into member(
    	member_id,
    	member_pw,
    	member_name,
    	member_addr,
    	member_phone,
    	member_email
    ) VALUES(
    	#{memberId},
    	PASSWORD(#{memberPw}),
    	#{memberName},
    	#{memberAddr},
    	#{memberPhone},
    	#{memberEmail}
    )
  </insert>
</mapper>